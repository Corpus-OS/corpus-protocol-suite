{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://corpusos.com/schemas/graph/graph.types.batch_op.json",
  "title": "Graph Batch Operation",
  "type": "object",
  "oneOf": [
    {
      "title": "create_vertex",
      "additionalProperties": false,
      "required": ["op", "label", "props"],
      "properties": {
        "op": { "type": "string", "const": "create_vertex" },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 128,
          "pattern": "^[A-Za-z0-9._:-]{1,128}$"
        },
        "props": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.entity.json#/properties/props"
        }
      }
    },
    {
      "title": "delete_vertex",
      "additionalProperties": false,
      "required": ["op", "id"],
      "properties": {
        "op": { "type": "string", "const": "delete_vertex" },
        "id": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.id.json"
        }
      }
    },
    {
      "title": "create_edge",
      "additionalProperties": false,
      "required": ["op", "label", "from_id", "to_id", "props"],
      "properties": {
        "op": { "type": "string", "const": "create_edge" },
        "label": {
          "type": "string",
          "minLength": 1,
          "maxLength": 128,
          "pattern": "^[A-Za-z0-9._:-]{1,128}$"
        },
        "from_id": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.id.json"
        },
        "to_id": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.id.json"
        },
        "props": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.entity.json#/properties/props"
        }
      }
    },
    {
      "title": "delete_edge",
      "additionalProperties": false,
      "required": ["op", "id"],
      "properties": {
        "op": { "type": "string", "const": "delete_edge" },
        "id": {
          "$ref": "https://corpusos.com/schemas/graph/graph.types.id.json"
        }
      }
    },
    {
      "title": "query",
      "additionalProperties": false,
      "required": ["op", "dialect", "text"],
      "properties": {
        "op": { "type": "string", "const": "query" },
        "dialect": { "type": "string", "minLength": 1, "maxLength": 64 },
        "text": { "type": "string", "minLength": 1, "maxLength": 100000 },
        "params": {
          "type": "object",
          "additionalProperties": true,
          "maxProperties": 256
        }
      }
    }
  ]
}
