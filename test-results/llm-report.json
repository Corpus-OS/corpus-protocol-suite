{"created": 1763659649.5453975, "duration": 1.8645069599151611, "exitcode": 1, "root": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite", "environment": {}, "summary": {"passed": 59, "failed": 14, "total": 73, "collected": 73}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/vector", "type": "Dir"}]}, {"nodeid": "tests/vector/test_batch_size_limits.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_upsert_respects_max_batch_size", "type": "Coroutine", "lineno": 24}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_size_exceeded_includes_suggestion", "type": "Coroutine", "lineno": 39}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_partial_failure_reporting_shape", "type": "Coroutine", "lineno": 59}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_operations_atomic_per_vector", "type": "Coroutine", "lineno": 79}]}, {"nodeid": "tests/vector/test_capabilities_shape.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_capabilities_returns_correct_type", "type": "Coroutine", "lineno": 15}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_identity_fields", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_supported_metrics", "type": "Coroutine", "lineno": 29}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_resource_limits_positive", "type": "Coroutine", "lineno": 39}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_feature_flags_boolean", "type": "Coroutine", "lineno": 50}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_idempotent_calls", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_all_required_fields_present", "type": "Coroutine", "lineno": 75}]}, {"nodeid": "tests/vector/test_context_siem.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_context_siem.py::test_observability_context_propagates_to_metrics_siem_safe", "type": "Coroutine", "lineno": 70}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_tenant_hashed_never_raw", "type": "Coroutine", "lineno": 86}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_no_vector_data_in_metrics", "type": "Coroutine", "lineno": 105}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_metrics_emitted_on_error_path", "type": "Coroutine", "lineno": 125}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_query_metrics_include_namespace", "type": "Coroutine", "lineno": 144}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_upsert_metrics_include_vector_count", "type": "Coroutine", "lineno": 164}]}, {"nodeid": "tests/vector/test_deadline_enforcement.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_budget_nonnegative", "type": "Coroutine", "lineno": 34}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_exceeded_on_expired_budget", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_preflight_deadline_check_on_upsert", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_query_respects_deadline_mid_operation", "type": "Coroutine", "lineno": 82}]}, {"nodeid": "tests/vector/test_delete_operations.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_ids_returns_counts", "type": "Coroutine", "lineno": 22}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_filter_returns_counts", "type": "Coroutine", "lineno": 36}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_requires_ids_or_filter", "type": "Coroutine", "lineno": 46}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_idempotent_for_missing_ids", "type": "Coroutine", "lineno": 57}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_result_structure", "type": "Coroutine", "lineno": 70}]}, {"nodeid": "tests/vector/test_dimension_validation.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_upsert", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_query", "type": "Coroutine", "lineno": 38}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_error_attributes", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_non_retryable", "type": "Coroutine", "lineno": 70}]}, {"nodeid": "tests/vector/test_error_mapping_retryable.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_retryable_errors_with_hints", "type": "Coroutine", "lineno": 24}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_index_not_ready_retryable", "type": "Coroutine", "lineno": 35}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_dimension_mismatch_non_retryable_flag", "type": "Coroutine", "lineno": 42}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_bad_request_on_invalid_top_k", "type": "Coroutine", "lineno": 49}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_error_has_siem_safe_details", "type": "Coroutine", "lineno": 59}]}, {"nodeid": "tests/vector/test_filtering_semantics.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_query_filter_equality", "type": "Coroutine", "lineno": 22}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_delete_filter_equality", "type": "Coroutine", "lineno": 47}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_requires_mapping_type", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_respects_capabilities_support", "type": "Coroutine", "lineno": 72}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_empty_results_ok", "type": "Coroutine", "lineno": 91}]}, {"nodeid": "tests/vector/test_health_report.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_health_report.py::test_health_health_returns_required_fields", "type": "Coroutine", "lineno": 15}, {"nodeid": "tests/vector/test_health_report.py::test_health_health_includes_namespaces", "type": "Coroutine", "lineno": 25}, {"nodeid": "tests/vector/test_health_report.py::test_health_status_ok_bool", "type": "Coroutine", "lineno": 33}, {"nodeid": "tests/vector/test_health_report.py::test_health_shape_consistent_on_error", "type": "Coroutine", "lineno": 40}, {"nodeid": "tests/vector/test_health_report.py::test_health_identity_fields_stable", "type": "Coroutine", "lineno": 58}]}, {"nodeid": "tests/vector/test_namespace_operations.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_create_namespace_returns_success", "type": "Coroutine", "lineno": 23}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_positive_dimensions", "type": "Coroutine", "lineno": 32}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_valid_distance_metric", "type": "Coroutine", "lineno": 43}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_health_exposes_namespaces_dict", "type": "Coroutine", "lineno": 54}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_delete_namespace_idempotent", "type": "Coroutine", "lineno": 63}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_isolation", "type": "Coroutine", "lineno": 77}]}, {"nodeid": "tests/vector/test_query_basic.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_query_basic.py::test_query_query_returns_vector_matches", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_query_basic.py::test_query_validates_dimensions", "type": "Coroutine", "lineno": 32}, {"nodeid": "tests/vector/test_query_basic.py::test_query_top_k_must_be_positive", "type": "Coroutine", "lineno": 46}, {"nodeid": "tests/vector/test_query_basic.py::test_query_respects_max_top_k", "type": "Coroutine", "lineno": 55}, {"nodeid": "tests/vector/test_query_basic.py::test_query_results_sorted_by_score_desc", "type": "Coroutine", "lineno": 74}, {"nodeid": "tests/vector/test_query_basic.py::test_query_include_flags_respected", "type": "Coroutine", "lineno": 84}]}, {"nodeid": "tests/vector/test_upsert_basic.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_upsert_returns_result_with_counts", "type": "Coroutine", "lineno": 23}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_dimensions", "type": "Coroutine", "lineno": 37}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_namespace_exists_or_behavior_documented", "type": "Coroutine", "lineno": 52}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_requires_non_empty_vectors", "type": "Coroutine", "lineno": 76}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_partial_failure_reporting", "type": "Coroutine", "lineno": 87}]}, {"nodeid": "tests/vector/test_wire_handler.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_capabilities_success_envelope", "type": "Coroutine", "lineno": 137}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_roundtrip_and_context_plumbing", "type": "Coroutine", "lineno": 157}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_upsert_delete_namespace_health_envelopes", "type": "Coroutine", "lineno": 201}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_delete_namespace_operation", "type": "Coroutine", "lineno": 254}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_unknown_op_maps_to_not_supported", "type": "Coroutine", "lineno": 285}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_vector_adapter_error_to_normalized_envelope", "type": "Coroutine", "lineno": 301}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_unexpected_exception_to_unavailable", "type": "Coroutine", "lineno": 323}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_missing_or_invalid_op_maps_to_bad_request", "type": "Coroutine", "lineno": 344}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_not_supported_adapter_error", "type": "Coroutine", "lineno": 359}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_error_envelope_includes_message_and_type", "type": "Coroutine", "lineno": 380}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_missing_required_fields_maps_to_bad_request", "type": "Coroutine", "lineno": 403}]}, {"nodeid": "tests/vector", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_batch_size_limits.py", "type": "Module"}, {"nodeid": "tests/vector/test_capabilities_shape.py", "type": "Module"}, {"nodeid": "tests/vector/test_context_siem.py", "type": "Module"}, {"nodeid": "tests/vector/test_deadline_enforcement.py", "type": "Module"}, {"nodeid": "tests/vector/test_delete_operations.py", "type": "Module"}, {"nodeid": "tests/vector/test_dimension_validation.py", "type": "Module"}, {"nodeid": "tests/vector/test_error_mapping_retryable.py", "type": "Module"}, {"nodeid": "tests/vector/test_filtering_semantics.py", "type": "Module"}, {"nodeid": "tests/vector/test_health_report.py", "type": "Module"}, {"nodeid": "tests/vector/test_namespace_operations.py", "type": "Module"}, {"nodeid": "tests/vector/test_query_basic.py", "type": "Module"}, {"nodeid": "tests/vector/test_upsert_basic.py", "type": "Module"}, {"nodeid": "tests/vector/test_wire_handler.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_upsert_respects_max_batch_size", "lineno": 24, "outcome": "passed", "keywords": ["test_batch_limits_upsert_respects_max_batch_size", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0010917730005530757, "outcome": "passed"}, "call": {"duration": 0.03330430099958903, "outcome": "passed"}, "teardown": {"duration": 0.0003324780000184546, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_size_exceeded_includes_suggestion", "lineno": 39, "outcome": "passed", "keywords": ["test_batch_limits_batch_size_exceeded_includes_suggestion", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006193869994604029, "outcome": "passed"}, "call": {"duration": 0.022722040000189736, "outcome": "passed"}, "teardown": {"duration": 0.0004691990006904234, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_partial_failure_reporting_shape", "lineno": 59, "outcome": "passed", "keywords": ["test_batch_limits_partial_failure_reporting_shape", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007333140001719585, "outcome": "passed"}, "call": {"duration": 0.02127039000060904, "outcome": "passed"}, "teardown": {"duration": 0.0004097840001122677, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_operations_atomic_per_vector", "lineno": 79, "outcome": "passed", "keywords": ["test_batch_limits_batch_operations_atomic_per_vector", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006354409997584298, "outcome": "passed"}, "call": {"duration": 0.021148603000256117, "outcome": "passed"}, "teardown": {"duration": 0.0005485120000230381, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_capabilities_returns_correct_type", "lineno": 15, "outcome": "passed", "keywords": ["test_capabilities_capabilities_returns_correct_type", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0010048180001831497, "outcome": "passed"}, "call": {"duration": 0.010622472999784804, "outcome": "passed"}, "teardown": {"duration": 0.00032572100008110283, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_identity_fields", "lineno": 21, "outcome": "passed", "keywords": ["test_capabilities_identity_fields", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007833320005374844, "outcome": "passed"}, "call": {"duration": 0.010547636999945098, "outcome": "passed"}, "teardown": {"duration": 0.0003312029994049226, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_supported_metrics", "lineno": 29, "outcome": "passed", "keywords": ["test_capabilities_supported_metrics", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007539700000052107, "outcome": "passed"}, "call": {"duration": 0.010525272999984736, "outcome": "passed"}, "teardown": {"duration": 0.000507421999827784, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_resource_limits_positive", "lineno": 39, "outcome": "passed", "keywords": ["test_capabilities_resource_limits_positive", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008886880004865816, "outcome": "passed"}, "call": {"duration": 0.010535442999753286, "outcome": "passed"}, "teardown": {"duration": 0.0003817409997282084, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_feature_flags_boolean", "lineno": 50, "outcome": "passed", "keywords": ["test_capabilities_feature_flags_boolean", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007032530002106796, "outcome": "passed"}, "call": {"duration": 0.010627403000398772, "outcome": "passed"}, "teardown": {"duration": 0.0003519689998938702, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_idempotent_calls", "lineno": 68, "outcome": "passed", "keywords": ["test_capabilities_idempotent_calls", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007970080005179625, "outcome": "passed"}, "call": {"duration": 0.02091956399999617, "outcome": "passed"}, "teardown": {"duration": 0.0003541919995768694, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_all_required_fields_present", "lineno": 75, "outcome": "passed", "keywords": ["test_capabilities_all_required_fields_present", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008198799996534945, "outcome": "passed"}, "call": {"duration": 0.010613458000079845, "outcome": "passed"}, "teardown": {"duration": 0.00047136200009845197, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_context_propagates_to_metrics_siem_safe", "lineno": 70, "outcome": "failed", "keywords": ["test_observability_context_propagates_to_metrics_siem_safe", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008643380006105872, "outcome": "passed"}, "call": {"duration": 0.021939301999736927, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 78, "message": "in test_observability_context_propagates_to_metrics_siem_safe"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1761, "message": "in query"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1532, "message": "in _with_gates_unary"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1356, "message": "in _apply_deadline"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 612, "message": "in wrap"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1688, "message": "in _call"}, {"path": "tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "in _do_query"}], "longrepr": "tests/vector/test_context_siem.py:78: in test_observability_context_propagates_to_metrics_siem_safe\n    await adapter.query(QuerySpec(vector=[0.1], top_k=1, namespace=\"default\"), ctx=ctx)\ncorpus_sdk/vector/vector_base.py:1761: in query\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:1688: in _call\n    result = await self._do_query(spec, ctx=ctx)\ntests/mock/mock_vector_adapter.py:261: in _do_query\n    raise DimensionMismatch(\nE   corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "teardown": {"duration": 0.00037298700044630095, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_tenant_hashed_never_raw", "lineno": 86, "outcome": "failed", "keywords": ["test_observability_tenant_hashed_never_raw", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.000586541999837209, "outcome": "passed"}, "call": {"duration": 0.02077517500038084, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 95, "message": "in test_observability_tenant_hashed_never_raw"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1761, "message": "in query"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1532, "message": "in _with_gates_unary"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1356, "message": "in _apply_deadline"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 612, "message": "in wrap"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1688, "message": "in _call"}, {"path": "tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "in _do_query"}], "longrepr": "tests/vector/test_context_siem.py:95: in test_observability_tenant_hashed_never_raw\n    await adapter.query(QuerySpec(vector=[0.1], top_k=1, namespace=\"default\"), ctx=ctx)\ncorpus_sdk/vector/vector_base.py:1761: in query\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:1688: in _call\n    result = await self._do_query(spec, ctx=ctx)\ntests/mock/mock_vector_adapter.py:261: in _do_query\n    raise DimensionMismatch(\nE   corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "teardown": {"duration": 0.0003471529998932965, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_no_vector_data_in_metrics", "lineno": 105, "outcome": "passed", "keywords": ["test_observability_no_vector_data_in_metrics", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005187650003790623, "outcome": "passed"}, "call": {"duration": 0.031947563999892736, "outcome": "passed"}, "teardown": {"duration": 0.001314487999479752, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_metrics_emitted_on_error_path", "lineno": 125, "outcome": "failed", "keywords": ["test_observability_metrics_emitted_on_error_path", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.002923933000602119, "outcome": "passed"}, "call": {"duration": 0.0014459640005952679, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_context_siem.py", "lineno": 142, "message": "AssertionError: No metrics emitted for error path\nassert []"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 142, "message": "in test_observability_metrics_emitted_on_error_path"}], "longrepr": "tests/vector/test_context_siem.py:142: in test_observability_metrics_emitted_on_error_path\n    assert error_observations, \"No metrics emitted for error path\"\nE   AssertionError: No metrics emitted for error path\nE   assert []"}, "teardown": {"duration": 0.0006981610004004324, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_query_metrics_include_namespace", "lineno": 144, "outcome": "failed", "keywords": ["test_observability_query_metrics_include_namespace", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0012266069998077, "outcome": "passed"}, "call": {"duration": 0.010847550999642408, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/mock/mock_vector_adapter.py", "lineno": 237, "message": "corpus_sdk.vector.vector_base.BadRequest: unknown namespace 'test-namespace'"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 152, "message": "in test_observability_query_metrics_include_namespace"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1761, "message": "in query"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1532, "message": "in _with_gates_unary"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1356, "message": "in _apply_deadline"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 612, "message": "in wrap"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1688, "message": "in _call"}, {"path": "tests/mock/mock_vector_adapter.py", "lineno": 237, "message": "in _do_query"}], "longrepr": "tests/vector/test_context_siem.py:152: in test_observability_query_metrics_include_namespace\n    await adapter.query(QuerySpec(vector=[0.2], top_k=1, namespace=\"test-namespace\"), ctx=ctx)\ncorpus_sdk/vector/vector_base.py:1761: in query\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:1688: in _call\n    result = await self._do_query(spec, ctx=ctx)\ntests/mock/mock_vector_adapter.py:237: in _do_query\n    raise BadRequest(f\"unknown namespace '{spec.namespace}'\")\nE   corpus_sdk.vector.vector_base.BadRequest: unknown namespace 'test-namespace'"}, "teardown": {"duration": 0.00035232899972470477, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_upsert_metrics_include_vector_count", "lineno": 164, "outcome": "failed", "keywords": ["test_observability_upsert_metrics_include_vector_count", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005408869992606924, "outcome": "passed"}, "call": {"duration": 0.026761688999613398, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_context_siem.py", "lineno": 184, "message": "assert 0 >= 1"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 184, "message": "in test_observability_upsert_metrics_include_vector_count"}], "longrepr": "tests/vector/test_context_siem.py:184: in test_observability_upsert_metrics_include_vector_count\n    assert vector_counters[-1][\"value\"] >= 1\nE   assert 0 >= 1"}, "teardown": {"duration": 0.0014740760007043718, "outcome": "passed"}}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_budget_nonnegative", "lineno": 34, "outcome": "passed", "keywords": ["test_deadline_deadline_budget_nonnegative", "test_deadline_enforcement.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0021178249999138643, "outcome": "passed"}, "call": {"duration": 0.0010946869997496833, "outcome": "passed"}, "teardown": {"duration": 0.0010935450000033597, "outcome": "passed"}}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_exceeded_on_expired_budget", "lineno": 56, "outcome": "passed", "keywords": ["test_deadline_deadline_exceeded_on_expired_budget", "test_deadline_enforcement.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.002134520999788947, "outcome": "passed"}, "call": {"duration": 0.0014118609997240128, "outcome": "passed"}, "teardown": {"duration": 0.001207352000164974, "outcome": "passed"}}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_preflight_deadline_check_on_upsert", "lineno": 68, "outcome": "passed", "keywords": ["test_deadline_preflight_deadline_check_on_upsert", "test_deadline_enforcement.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0018691909999688505, "outcome": "passed"}, "call": {"duration": 0.0011937809995288262, "outcome": "passed"}, "teardown": {"duration": 0.0007256119997691712, "outcome": "passed"}}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_query_respects_deadline_mid_operation", "lineno": 82, "outcome": "passed", "keywords": ["test_deadline_query_respects_deadline_mid_operation", "test_deadline_enforcement.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001444803999220312, "outcome": "passed"}, "call": {"duration": 0.010946067000077164, "outcome": "passed"}, "teardown": {"duration": 0.0005397740005719243, "outcome": "passed"}}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_ids_returns_counts", "lineno": 22, "outcome": "passed", "keywords": ["test_delete_delete_by_ids_returns_counts", "test_delete_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0013179289999243338, "outcome": "passed"}, "call": {"duration": 0.048723255999902904, "outcome": "passed"}, "teardown": {"duration": 0.00042424000002938556, "outcome": "passed"}}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_filter_returns_counts", "lineno": 36, "outcome": "passed", "keywords": ["test_delete_delete_by_filter_returns_counts", "test_delete_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008082510003077914, "outcome": "passed"}, "call": {"duration": 0.023172455000349146, "outcome": "passed"}, "teardown": {"duration": 0.0004916550005873432, "outcome": "passed"}}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_requires_ids_or_filter", "lineno": 46, "outcome": "passed", "keywords": ["test_delete_requires_ids_or_filter", "test_delete_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001320141999713087, "outcome": "passed"}, "call": {"duration": 0.0005287969997880282, "outcome": "passed"}, "teardown": {"duration": 0.0006465079995905398, "outcome": "passed"}}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_idempotent_for_missing_ids", "lineno": 57, "outcome": "passed", "keywords": ["test_delete_idempotent_for_missing_ids", "test_delete_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0011487330002637464, "outcome": "passed"}, "call": {"duration": 0.04684157999963645, "outcome": "passed"}, "teardown": {"duration": 0.0012644329999602633, "outcome": "passed"}}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_result_structure", "lineno": 70, "outcome": "passed", "keywords": ["test_delete_delete_result_structure", "test_delete_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0034242750007251743, "outcome": "passed"}, "call": {"duration": 0.024443057000098634, "outcome": "passed"}, "teardown": {"duration": 0.0013455419993988471, "outcome": "passed"}}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_upsert", "lineno": 21, "outcome": "passed", "keywords": ["test_dimension_validation_dimension_mismatch_on_upsert", "test_dimension_validation.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0021001039995098836, "outcome": "passed"}, "call": {"duration": 0.02183099600006244, "outcome": "passed"}, "teardown": {"duration": 0.0006916540005477145, "outcome": "passed"}}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_query", "lineno": 38, "outcome": "passed", "keywords": ["test_dimension_validation_dimension_mismatch_on_query", "test_dimension_validation.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0015720669998700032, "outcome": "passed"}, "call": {"duration": 0.02173585499986075, "outcome": "passed"}, "teardown": {"duration": 0.000931646000026376, "outcome": "passed"}}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_error_attributes", "lineno": 56, "outcome": "passed", "keywords": ["test_dimension_validation_dimension_mismatch_error_attributes", "test_dimension_validation.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0013214189993959735, "outcome": "passed"}, "call": {"duration": 0.02199691999976494, "outcome": "passed"}, "teardown": {"duration": 0.0006349640007101698, "outcome": "passed"}}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_non_retryable", "lineno": 70, "outcome": "passed", "keywords": ["test_dimension_validation_dimension_mismatch_non_retryable", "test_dimension_validation.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0012657450006372528, "outcome": "passed"}, "call": {"duration": 0.021697393000067677, "outcome": "passed"}, "teardown": {"duration": 0.0006251710001379251, "outcome": "passed"}}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_retryable_errors_with_hints", "lineno": 24, "outcome": "passed", "keywords": ["test_error_handling_retryable_errors_with_hints", "test_error_mapping_retryable.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0009818219996304833, "outcome": "passed"}, "call": {"duration": 0.0004739140003948705, "outcome": "passed"}, "teardown": {"duration": 0.0006412809998437297, "outcome": "passed"}}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_index_not_ready_retryable", "lineno": 35, "outcome": "passed", "keywords": ["test_error_handling_index_not_ready_retryable", "test_error_mapping_retryable.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0014242420002119616, "outcome": "passed"}, "call": {"duration": 0.0005903460005356465, "outcome": "passed"}, "teardown": {"duration": 0.0005926170006205211, "outcome": "passed"}}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_dimension_mismatch_non_retryable_flag", "lineno": 42, "outcome": "passed", "keywords": ["test_error_handling_dimension_mismatch_non_retryable_flag", "test_error_mapping_retryable.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001071067999873776, "outcome": "passed"}, "call": {"duration": 0.0004090410002390854, "outcome": "passed"}, "teardown": {"duration": 0.0005240749997028615, "outcome": "passed"}}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_bad_request_on_invalid_top_k", "lineno": 49, "outcome": "passed", "keywords": ["test_error_handling_bad_request_on_invalid_top_k", "test_error_mapping_retryable.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0010140019994651084, "outcome": "passed"}, "call": {"duration": 0.0006401470000128029, "outcome": "passed"}, "teardown": {"duration": 0.0006187190001583076, "outcome": "passed"}}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_error_has_siem_safe_details", "lineno": 59, "outcome": "passed", "keywords": ["test_error_handling_error_has_siem_safe_details", "test_error_mapping_retryable.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0009446240001125261, "outcome": "passed"}, "call": {"duration": 0.0005016080003770185, "outcome": "passed"}, "teardown": {"duration": 0.0004951359996994142, "outcome": "passed"}}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_query_filter_equality", "lineno": 22, "outcome": "passed", "keywords": ["test_filtering_query_filter_equality", "test_filtering_semantics.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0009488840005360544, "outcome": "passed"}, "call": {"duration": 0.05801851700016414, "outcome": "passed"}, "teardown": {"duration": 0.0011688569993566489, "outcome": "passed"}}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_delete_filter_equality", "lineno": 47, "outcome": "failed", "keywords": ["test_filtering_delete_filter_equality", "test_filtering_semantics.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.003480514000330004, "outcome": "passed"}, "call": {"duration": 0.025049617000149738, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_filtering_semantics.py", "lineno": 53, "message": "NameError: name 'DeleteResult' is not defined"}, "traceback": [{"path": "tests/vector/test_filtering_semantics.py", "lineno": 53, "message": "in test_filtering_delete_filter_equality"}], "longrepr": "tests/vector/test_filtering_semantics.py:53: in test_filtering_delete_filter_equality\n    assert isinstance(result, DeleteResult)\nE   NameError: name 'DeleteResult' is not defined"}, "teardown": {"duration": 0.0007068539998726919, "outcome": "passed"}}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_requires_mapping_type", "lineno": 56, "outcome": "passed", "keywords": ["test_filtering_filter_requires_mapping_type", "test_filtering_semantics.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0015130860001590918, "outcome": "passed"}, "call": {"duration": 0.0006478529994637938, "outcome": "passed"}, "teardown": {"duration": 0.0006380739996529883, "outcome": "passed"}}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_respects_capabilities_support", "lineno": 72, "outcome": "passed", "keywords": ["test_filtering_filter_respects_capabilities_support", "test_filtering_semantics.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0014727409998158691, "outcome": "passed"}, "call": {"duration": 0.01075131500056159, "outcome": "passed"}, "teardown": {"duration": 0.0005509570000867825, "outcome": "passed"}}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_empty_results_ok", "lineno": 91, "outcome": "passed", "keywords": ["test_filtering_filter_empty_results_ok", "test_filtering_semantics.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001060414999301429, "outcome": "passed"}, "call": {"duration": 0.03129438699943421, "outcome": "passed"}, "teardown": {"duration": 0.000445671000306902, "outcome": "passed"}}, {"nodeid": "tests/vector/test_health_report.py::test_health_health_returns_required_fields", "lineno": 15, "outcome": "passed", "keywords": ["test_health_health_returns_required_fields", "test_health_report.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008055210000748048, "outcome": "passed"}, "call": {"duration": 0.0014522709998345817, "outcome": "passed"}, "teardown": {"duration": 0.00031886300075711915, "outcome": "passed"}}, {"nodeid": "tests/vector/test_health_report.py::test_health_health_includes_namespaces", "lineno": 25, "outcome": "passed", "keywords": ["test_health_health_includes_namespaces", "test_health_report.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.000698155999998562, "outcome": "passed"}, "call": {"duration": 0.001434175999747822, "outcome": "passed"}, "teardown": {"duration": 0.0003086950000579236, "outcome": "passed"}}, {"nodeid": "tests/vector/test_health_report.py::test_health_status_ok_bool", "lineno": 33, "outcome": "passed", "keywords": ["test_health_status_ok_bool", "test_health_report.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008868690001690993, "outcome": "passed"}, "call": {"duration": 0.0013393119997999747, "outcome": "passed"}, "teardown": {"duration": 0.0002578290004748851, "outcome": "passed"}}, {"nodeid": "tests/vector/test_health_report.py::test_health_shape_consistent_on_error", "lineno": 40, "outcome": "passed", "keywords": ["test_health_shape_consistent_on_error", "test_health_report.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005126729993207846, "outcome": "passed"}, "call": {"duration": 0.0013232159999461146, "outcome": "passed"}, "teardown": {"duration": 0.0003035810004803352, "outcome": "passed"}}, {"nodeid": "tests/vector/test_health_report.py::test_health_identity_fields_stable", "lineno": 58, "outcome": "passed", "keywords": ["test_health_identity_fields_stable", "test_health_report.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0007792090000293683, "outcome": "passed"}, "call": {"duration": 0.002738514999691688, "outcome": "passed"}, "teardown": {"duration": 0.00047921500026859576, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_create_namespace_returns_success", "lineno": 23, "outcome": "passed", "keywords": ["test_namespace_create_namespace_returns_success", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.000904106999769283, "outcome": "passed"}, "call": {"duration": 0.011855498999466363, "outcome": "passed"}, "teardown": {"duration": 0.0003238689996578614, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_positive_dimensions", "lineno": 32, "outcome": "passed", "keywords": ["test_namespace_namespace_requires_positive_dimensions", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008630149995951797, "outcome": "passed"}, "call": {"duration": 0.00042041899996547727, "outcome": "passed"}, "teardown": {"duration": 0.0005336690001058741, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_valid_distance_metric", "lineno": 43, "outcome": "failed", "keywords": ["test_namespace_namespace_requires_valid_distance_metric", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008974799993666238, "outcome": "passed"}, "call": {"duration": 0.00041573399994376814, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/corpus_sdk/vector/vector_base.py", "lineno": 2233, "message": "corpus_sdk.vector.vector_base.BadRequest: distance_metric must be one of: cosine, euclidean, dotproduct"}, "traceback": [{"path": "tests/vector/test_namespace_operations.py", "lineno": 49, "message": "in test_namespace_namespace_requires_valid_distance_metric"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 2233, "message": "in create_namespace"}], "longrepr": "tests/vector/test_namespace_operations.py:49: in test_namespace_namespace_requires_valid_distance_metric\n    await adapter.create_namespace(spec)\ncorpus_sdk/vector/vector_base.py:2233: in create_namespace\n    raise BadRequest(\"distance_metric must be one of: cosine, euclidean, dotproduct\")\nE   corpus_sdk.vector.vector_base.BadRequest: distance_metric must be one of: cosine, euclidean, dotproduct"}, "teardown": {"duration": 0.00039155200011009583, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_health_exposes_namespaces_dict", "lineno": 54, "outcome": "passed", "keywords": ["test_namespace_health_exposes_namespaces_dict", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006243450006877538, "outcome": "passed"}, "call": {"duration": 0.0014737860001332592, "outcome": "passed"}, "teardown": {"duration": 0.000387828999919293, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_delete_namespace_idempotent", "lineno": 63, "outcome": "passed", "keywords": ["test_namespace_delete_namespace_idempotent", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006178220000947476, "outcome": "passed"}, "call": {"duration": 0.014018242999554786, "outcome": "passed"}, "teardown": {"duration": 0.0003477769996607094, "outcome": "passed"}}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_isolation", "lineno": 77, "outcome": "failed", "keywords": ["test_namespace_namespace_isolation", "test_namespace_operations.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0009040200002345955, "outcome": "passed"}, "call": {"duration": 0.010586185999272857, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/mock/mock_vector_adapter.py", "lineno": 351, "message": "corpus_sdk.vector.vector_base.BadRequest: unknown namespace 'namespace-a'"}, "traceback": [{"path": "tests/vector/test_namespace_operations.py", "lineno": 84, "message": "in test_namespace_namespace_isolation"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 2086, "message": "in upsert"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1532, "message": "in _with_gates_unary"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1356, "message": "in _apply_deadline"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 612, "message": "in wrap"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 2064, "message": "in _call"}, {"path": "tests/mock/mock_vector_adapter.py", "lineno": 351, "message": "in _do_upsert"}], "longrepr": "tests/vector/test_namespace_operations.py:84: in test_namespace_namespace_isolation\n    await adapter.upsert(UpsertSpec(vectors=[vector_a], namespace=\"namespace-a\"))\ncorpus_sdk/vector/vector_base.py:2086: in upsert\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:2064: in _call\n    result = await self._do_upsert(\ntests/mock/mock_vector_adapter.py:351: in _do_upsert\n    raise BadRequest(f\"unknown namespace '{ns}'\")\nE   corpus_sdk.vector.vector_base.BadRequest: unknown namespace 'namespace-a'"}, "teardown": {"duration": 0.00035076799940725323, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_query_returns_vector_matches", "lineno": 21, "outcome": "passed", "keywords": ["test_query_query_returns_vector_matches", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005438700000013341, "outcome": "passed"}, "call": {"duration": 0.03121957100029249, "outcome": "passed"}, "teardown": {"duration": 0.00035115700029564323, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_validates_dimensions", "lineno": 32, "outcome": "passed", "keywords": ["test_query_validates_dimensions", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0008105500000965549, "outcome": "passed"}, "call": {"duration": 0.021112827000251855, "outcome": "passed"}, "teardown": {"duration": 0.00039082900002540555, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_top_k_must_be_positive", "lineno": 46, "outcome": "passed", "keywords": ["test_query_top_k_must_be_positive", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0009326149993285071, "outcome": "passed"}, "call": {"duration": 0.0003645759998107678, "outcome": "passed"}, "teardown": {"duration": 0.0003323150003780029, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_respects_max_top_k", "lineno": 55, "outcome": "passed", "keywords": ["test_query_respects_max_top_k", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006533279993163887, "outcome": "passed"}, "call": {"duration": 0.020912194000629825, "outcome": "passed"}, "teardown": {"duration": 0.0005637800004478777, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_results_sorted_by_score_desc", "lineno": 74, "outcome": "passed", "keywords": ["test_query_results_sorted_by_score_desc", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0011623369991866639, "outcome": "passed"}, "call": {"duration": 0.031298998999773175, "outcome": "passed"}, "teardown": {"duration": 0.0006752770004823105, "outcome": "passed"}}, {"nodeid": "tests/vector/test_query_basic.py::test_query_include_flags_respected", "lineno": 84, "outcome": "passed", "keywords": ["test_query_include_flags_respected", "test_query_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0014565669998773956, "outcome": "passed"}, "call": {"duration": 0.03135523299988563, "outcome": "passed"}, "teardown": {"duration": 0.0006285629997364595, "outcome": "passed"}}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_upsert_returns_result_with_counts", "lineno": 23, "outcome": "passed", "keywords": ["test_upsert_upsert_returns_result_with_counts", "test_upsert_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0012923860003866139, "outcome": "passed"}, "call": {"duration": 0.026365317000454525, "outcome": "passed"}, "teardown": {"duration": 0.0006975699998292839, "outcome": "passed"}}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_dimensions", "lineno": 37, "outcome": "passed", "keywords": ["test_upsert_validates_dimensions", "test_upsert_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0016646459998810315, "outcome": "passed"}, "call": {"duration": 0.021471654000379203, "outcome": "passed"}, "teardown": {"duration": 0.0006157329999041394, "outcome": "passed"}}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_namespace_exists_or_behavior_documented", "lineno": 52, "outcome": "failed", "keywords": ["test_upsert_validates_namespace_exists_or_behavior_documented", "test_upsert_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0016724269999031094, "outcome": "passed"}, "call": {"duration": 0.011009370000465424, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_upsert_basic.py", "lineno": 67, "message": "NameError: name 'NotSupported' is not defined"}, "traceback": [{"path": "tests/vector/test_upsert_basic.py", "lineno": 67, "message": "in test_upsert_validates_namespace_exists_or_behavior_documented"}], "longrepr": "tests/vector/test_upsert_basic.py:66: in test_upsert_validates_namespace_exists_or_behavior_documented\n    result = await adapter.upsert(spec)\ncorpus_sdk/vector/vector_base.py:2086: in upsert\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:2064: in _call\n    result = await self._do_upsert(\ntests/mock/mock_vector_adapter.py:351: in _do_upsert\n    raise BadRequest(f\"unknown namespace '{ns}'\")\nE   corpus_sdk.vector.vector_base.BadRequest: unknown namespace '__completely_unknown_namespace_123__'\n\nDuring handling of the above exception, another exception occurred:\ntests/vector/test_upsert_basic.py:67: in test_upsert_validates_namespace_exists_or_behavior_documented\n    except (BadRequest, NotSupported):\nE   NameError: name 'NotSupported' is not defined"}, "teardown": {"duration": 0.0003629360007835203, "outcome": "passed"}}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_requires_non_empty_vectors", "lineno": 76, "outcome": "passed", "keywords": ["test_upsert_requires_non_empty_vectors", "test_upsert_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005279339993649046, "outcome": "passed"}, "call": {"duration": 0.00025290200028393883, "outcome": "passed"}, "teardown": {"duration": 0.0002324919996681274, "outcome": "passed"}}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_partial_failure_reporting", "lineno": 87, "outcome": "passed", "keywords": ["test_upsert_partial_failure_reporting", "test_upsert_basic.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0004671659999075928, "outcome": "passed"}, "call": {"duration": 0.021177272999921115, "outcome": "passed"}, "teardown": {"duration": 0.0003168160001223441, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_capabilities_success_envelope", "lineno": 137, "outcome": "failed", "keywords": ["test_wire_contract_capabilities_success_envelope", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.000856310999552079, "outcome": "passed"}, "call": {"duration": 0.00033912599974428304, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_wire_handler.py", "lineno": 150, "message": "assert False is True"}, "traceback": [{"path": "tests/vector/test_wire_handler.py", "lineno": 150, "message": "in test_wire_contract_capabilities_success_envelope"}], "longrepr": "tests/vector/test_wire_handler.py:150: in test_wire_contract_capabilities_success_envelope\n    assert result[\"ok\"] is True\nE   assert False is True"}, "teardown": {"duration": 0.0004492779999054619, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_roundtrip_and_context_plumbing", "lineno": 157, "outcome": "failed", "keywords": ["test_wire_contract_query_roundtrip_and_context_plumbing", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005830949994560797, "outcome": "passed"}, "call": {"duration": 0.00043831699986185413, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_wire_handler.py", "lineno": 188, "message": "assert False is True"}, "traceback": [{"path": "tests/vector/test_wire_handler.py", "lineno": 188, "message": "in test_wire_contract_query_roundtrip_and_context_plumbing"}], "longrepr": "tests/vector/test_wire_handler.py:188: in test_wire_contract_query_roundtrip_and_context_plumbing\n    assert result[\"ok\"] is True\nE   assert False is True"}, "teardown": {"duration": 0.00042657999983930495, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_upsert_delete_namespace_health_envelopes", "lineno": 201, "outcome": "failed", "keywords": ["test_wire_contract_upsert_delete_namespace_health_envelopes", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005734680007662973, "outcome": "passed"}, "call": {"duration": 0.00042028700045193546, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_wire_handler.py", "lineno": 216, "message": "assert False is True"}, "traceback": [{"path": "tests/vector/test_wire_handler.py", "lineno": 216, "message": "in test_wire_contract_upsert_delete_namespace_health_envelopes"}], "longrepr": "tests/vector/test_wire_handler.py:216: in test_wire_contract_upsert_delete_namespace_health_envelopes\n    assert upsert_result[\"ok\"] is True\nE   assert False is True"}, "teardown": {"duration": 0.0003345659997648909, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_delete_namespace_operation", "lineno": 254, "outcome": "failed", "keywords": ["test_wire_contract_delete_namespace_operation", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.00044407199948182097, "outcome": "passed"}, "call": {"duration": 0.00036584899953595595, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_wire_handler.py", "lineno": 269, "message": "assert False is True"}, "traceback": [{"path": "tests/vector/test_wire_handler.py", "lineno": 269, "message": "in test_wire_contract_delete_namespace_operation"}], "longrepr": "tests/vector/test_wire_handler.py:269: in test_wire_contract_delete_namespace_operation\n    assert result[\"ok\"] is True\nE   assert False is True"}, "teardown": {"duration": 0.0003741830005310476, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_unknown_op_maps_to_not_supported", "lineno": 285, "outcome": "passed", "keywords": ["test_wire_contract_unknown_op_maps_to_not_supported", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.000495219000185898, "outcome": "passed"}, "call": {"duration": 0.0002673459994184668, "outcome": "passed"}, "teardown": {"duration": 0.00022353399981511757, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_vector_adapter_error_to_normalized_envelope", "lineno": 301, "outcome": "passed", "keywords": ["test_wire_contract_maps_vector_adapter_error_to_normalized_envelope", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005929970002398477, "outcome": "passed"}, "call": {"duration": 0.0004410560004544095, "outcome": "passed"}, "teardown": {"duration": 0.00033395799982827157, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_unexpected_exception_to_unavailable", "lineno": 323, "outcome": "passed", "keywords": ["test_wire_contract_maps_unexpected_exception_to_unavailable", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005562670003200765, "outcome": "passed"}, "call": {"duration": 0.00027898499956791056, "outcome": "passed"}, "teardown": {"duration": 0.00025198499952239217, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_missing_or_invalid_op_maps_to_bad_request", "lineno": 344, "outcome": "passed", "keywords": ["test_wire_contract_missing_or_invalid_op_maps_to_bad_request", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005054540006312891, "outcome": "passed"}, "call": {"duration": 0.0002920340002674493, "outcome": "passed"}, "teardown": {"duration": 0.00028620800003409386, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_not_supported_adapter_error", "lineno": 359, "outcome": "passed", "keywords": ["test_wire_contract_maps_not_supported_adapter_error", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0005435999992187135, "outcome": "passed"}, "call": {"duration": 0.0002464479994159774, "outcome": "passed"}, "teardown": {"duration": 0.0002226289998361608, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_error_envelope_includes_message_and_type", "lineno": 380, "outcome": "passed", "keywords": ["test_wire_contract_error_envelope_includes_message_and_type", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.00045045800015941495, "outcome": "passed"}, "call": {"duration": 0.00023419299941451754, "outcome": "passed"}, "teardown": {"duration": 0.00021679899964510696, "outcome": "passed"}}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_missing_required_fields_maps_to_bad_request", "lineno": 403, "outcome": "failed", "keywords": ["test_wire_contract_query_missing_required_fields_maps_to_bad_request", "test_wire_handler.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.00045243300064612413, "outcome": "passed"}, "call": {"duration": 0.0015331129998230608, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/vector/test_wire_handler.py", "lineno": 416, "message": "AssertionError: assert 'UNAVAILABLE' == 'BAD_REQUEST'\n  \n  \u001b[0m\u001b[91m- BAD_REQUEST\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\n  \u001b[92m+ UNAVAILABLE\u001b[39;49;00m\u001b[90m\u001b[39;49;00m"}, "traceback": [{"path": "tests/vector/test_wire_handler.py", "lineno": 416, "message": "in test_wire_contract_query_missing_required_fields_maps_to_bad_request"}], "longrepr": "tests/vector/test_wire_handler.py:416: in test_wire_contract_query_missing_required_fields_maps_to_bad_request\n    assert result[\"code\"] == \"BAD_REQUEST\"\nE   AssertionError: assert 'UNAVAILABLE' == 'BAD_REQUEST'\nE     \nE     \u001b[0m\u001b[91m- BAD_REQUEST\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\nE     \u001b[92m+ UNAVAILABLE\u001b[39;49;00m\u001b[90m\u001b[39;49;00m"}, "teardown": {"duration": 0.0003983169999628444, "outcome": "passed"}}]}