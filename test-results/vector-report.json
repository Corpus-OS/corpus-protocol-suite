{"created": 1763659595.3184369, "duration": 0.5519952774047852, "exitcode": 1, "root": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite", "environment": {}, "summary": {"passed": 11, "failed": 1, "total": 12, "collected": 73}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/vector", "type": "Dir"}]}, {"nodeid": "tests/vector/test_batch_size_limits.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_upsert_respects_max_batch_size", "type": "Coroutine", "lineno": 24}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_size_exceeded_includes_suggestion", "type": "Coroutine", "lineno": 39}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_partial_failure_reporting_shape", "type": "Coroutine", "lineno": 59}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_operations_atomic_per_vector", "type": "Coroutine", "lineno": 79}]}, {"nodeid": "tests/vector/test_capabilities_shape.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_capabilities_returns_correct_type", "type": "Coroutine", "lineno": 15}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_identity_fields", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_supported_metrics", "type": "Coroutine", "lineno": 29}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_resource_limits_positive", "type": "Coroutine", "lineno": 39}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_feature_flags_boolean", "type": "Coroutine", "lineno": 50}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_idempotent_calls", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_all_required_fields_present", "type": "Coroutine", "lineno": 75}]}, {"nodeid": "tests/vector/test_context_siem.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_context_siem.py::test_observability_context_propagates_to_metrics_siem_safe", "type": "Coroutine", "lineno": 70}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_tenant_hashed_never_raw", "type": "Coroutine", "lineno": 86}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_no_vector_data_in_metrics", "type": "Coroutine", "lineno": 105}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_metrics_emitted_on_error_path", "type": "Coroutine", "lineno": 125}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_query_metrics_include_namespace", "type": "Coroutine", "lineno": 144}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_upsert_metrics_include_vector_count", "type": "Coroutine", "lineno": 164}]}, {"nodeid": "tests/vector/test_deadline_enforcement.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_budget_nonnegative", "type": "Coroutine", "lineno": 34}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_deadline_exceeded_on_expired_budget", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_preflight_deadline_check_on_upsert", "type": "Coroutine", "lineno": 68}, {"nodeid": "tests/vector/test_deadline_enforcement.py::test_deadline_query_respects_deadline_mid_operation", "type": "Coroutine", "lineno": 82}]}, {"nodeid": "tests/vector/test_delete_operations.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_ids_returns_counts", "type": "Coroutine", "lineno": 22}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_by_filter_returns_counts", "type": "Coroutine", "lineno": 36}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_requires_ids_or_filter", "type": "Coroutine", "lineno": 46}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_idempotent_for_missing_ids", "type": "Coroutine", "lineno": 57}, {"nodeid": "tests/vector/test_delete_operations.py::test_delete_delete_result_structure", "type": "Coroutine", "lineno": 70}]}, {"nodeid": "tests/vector/test_dimension_validation.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_upsert", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_on_query", "type": "Coroutine", "lineno": 38}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_error_attributes", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_dimension_validation.py::test_dimension_validation_dimension_mismatch_non_retryable", "type": "Coroutine", "lineno": 70}]}, {"nodeid": "tests/vector/test_error_mapping_retryable.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_retryable_errors_with_hints", "type": "Coroutine", "lineno": 24}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_index_not_ready_retryable", "type": "Coroutine", "lineno": 35}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_dimension_mismatch_non_retryable_flag", "type": "Coroutine", "lineno": 42}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_bad_request_on_invalid_top_k", "type": "Coroutine", "lineno": 49}, {"nodeid": "tests/vector/test_error_mapping_retryable.py::test_error_handling_error_has_siem_safe_details", "type": "Coroutine", "lineno": 59}]}, {"nodeid": "tests/vector/test_filtering_semantics.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_query_filter_equality", "type": "Coroutine", "lineno": 22}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_delete_filter_equality", "type": "Coroutine", "lineno": 47}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_requires_mapping_type", "type": "Coroutine", "lineno": 56}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_respects_capabilities_support", "type": "Coroutine", "lineno": 72}, {"nodeid": "tests/vector/test_filtering_semantics.py::test_filtering_filter_empty_results_ok", "type": "Coroutine", "lineno": 91}]}, {"nodeid": "tests/vector/test_health_report.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_health_report.py::test_health_health_returns_required_fields", "type": "Coroutine", "lineno": 15}, {"nodeid": "tests/vector/test_health_report.py::test_health_health_includes_namespaces", "type": "Coroutine", "lineno": 25}, {"nodeid": "tests/vector/test_health_report.py::test_health_status_ok_bool", "type": "Coroutine", "lineno": 33}, {"nodeid": "tests/vector/test_health_report.py::test_health_shape_consistent_on_error", "type": "Coroutine", "lineno": 40}, {"nodeid": "tests/vector/test_health_report.py::test_health_identity_fields_stable", "type": "Coroutine", "lineno": 58}]}, {"nodeid": "tests/vector/test_namespace_operations.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_create_namespace_returns_success", "type": "Coroutine", "lineno": 23}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_positive_dimensions", "type": "Coroutine", "lineno": 32}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_requires_valid_distance_metric", "type": "Coroutine", "lineno": 43}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_health_exposes_namespaces_dict", "type": "Coroutine", "lineno": 54}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_delete_namespace_idempotent", "type": "Coroutine", "lineno": 63}, {"nodeid": "tests/vector/test_namespace_operations.py::test_namespace_namespace_isolation", "type": "Coroutine", "lineno": 77}]}, {"nodeid": "tests/vector/test_query_basic.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_query_basic.py::test_query_query_returns_vector_matches", "type": "Coroutine", "lineno": 21}, {"nodeid": "tests/vector/test_query_basic.py::test_query_validates_dimensions", "type": "Coroutine", "lineno": 32}, {"nodeid": "tests/vector/test_query_basic.py::test_query_top_k_must_be_positive", "type": "Coroutine", "lineno": 46}, {"nodeid": "tests/vector/test_query_basic.py::test_query_respects_max_top_k", "type": "Coroutine", "lineno": 55}, {"nodeid": "tests/vector/test_query_basic.py::test_query_results_sorted_by_score_desc", "type": "Coroutine", "lineno": 74}, {"nodeid": "tests/vector/test_query_basic.py::test_query_include_flags_respected", "type": "Coroutine", "lineno": 84}]}, {"nodeid": "tests/vector/test_upsert_basic.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_upsert_returns_result_with_counts", "type": "Coroutine", "lineno": 23}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_dimensions", "type": "Coroutine", "lineno": 37}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_validates_namespace_exists_or_behavior_documented", "type": "Coroutine", "lineno": 52}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_requires_non_empty_vectors", "type": "Coroutine", "lineno": 76}, {"nodeid": "tests/vector/test_upsert_basic.py::test_upsert_partial_failure_reporting", "type": "Coroutine", "lineno": 87}]}, {"nodeid": "tests/vector/test_wire_handler.py", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_capabilities_success_envelope", "type": "Coroutine", "lineno": 137}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_roundtrip_and_context_plumbing", "type": "Coroutine", "lineno": 157}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_upsert_delete_namespace_health_envelopes", "type": "Coroutine", "lineno": 201}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_delete_namespace_operation", "type": "Coroutine", "lineno": 254}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_unknown_op_maps_to_not_supported", "type": "Coroutine", "lineno": 285}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_vector_adapter_error_to_normalized_envelope", "type": "Coroutine", "lineno": 301}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_unexpected_exception_to_unavailable", "type": "Coroutine", "lineno": 323}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_missing_or_invalid_op_maps_to_bad_request", "type": "Coroutine", "lineno": 344}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_maps_not_supported_adapter_error", "type": "Coroutine", "lineno": 359}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_error_envelope_includes_message_and_type", "type": "Coroutine", "lineno": 380}, {"nodeid": "tests/vector/test_wire_handler.py::test_wire_contract_query_missing_required_fields_maps_to_bad_request", "type": "Coroutine", "lineno": 403}]}, {"nodeid": "tests/vector", "outcome": "passed", "result": [{"nodeid": "tests/vector/test_batch_size_limits.py", "type": "Module"}, {"nodeid": "tests/vector/test_capabilities_shape.py", "type": "Module"}, {"nodeid": "tests/vector/test_context_siem.py", "type": "Module"}, {"nodeid": "tests/vector/test_deadline_enforcement.py", "type": "Module"}, {"nodeid": "tests/vector/test_delete_operations.py", "type": "Module"}, {"nodeid": "tests/vector/test_dimension_validation.py", "type": "Module"}, {"nodeid": "tests/vector/test_error_mapping_retryable.py", "type": "Module"}, {"nodeid": "tests/vector/test_filtering_semantics.py", "type": "Module"}, {"nodeid": "tests/vector/test_health_report.py", "type": "Module"}, {"nodeid": "tests/vector/test_namespace_operations.py", "type": "Module"}, {"nodeid": "tests/vector/test_query_basic.py", "type": "Module"}, {"nodeid": "tests/vector/test_upsert_basic.py", "type": "Module"}, {"nodeid": "tests/vector/test_wire_handler.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_upsert_respects_max_batch_size", "lineno": 24, "outcome": "passed", "keywords": ["test_batch_limits_upsert_respects_max_batch_size", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001184665000437235, "outcome": "passed"}, "call": {"duration": 0.03434586099956505, "outcome": "passed"}, "teardown": {"duration": 0.00035584200031735236, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_size_exceeded_includes_suggestion", "lineno": 39, "outcome": "passed", "keywords": ["test_batch_limits_batch_size_exceeded_includes_suggestion", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0006808150001234026, "outcome": "passed"}, "call": {"duration": 0.023911509999379632, "outcome": "passed"}, "teardown": {"duration": 0.001126000000112981, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_partial_failure_reporting_shape", "lineno": 59, "outcome": "passed", "keywords": ["test_batch_limits_partial_failure_reporting_shape", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0027726300004360382, "outcome": "passed"}, "call": {"duration": 0.023193727000034414, "outcome": "passed"}, "teardown": {"duration": 0.0009243790000255103, "outcome": "passed"}}, {"nodeid": "tests/vector/test_batch_size_limits.py::test_batch_limits_batch_operations_atomic_per_vector", "lineno": 79, "outcome": "passed", "keywords": ["test_batch_limits_batch_operations_atomic_per_vector", "test_batch_size_limits.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0024227799995060195, "outcome": "passed"}, "call": {"duration": 0.021914491999268648, "outcome": "passed"}, "teardown": {"duration": 0.0005737800001952564, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_capabilities_returns_correct_type", "lineno": 15, "outcome": "passed", "keywords": ["test_capabilities_capabilities_returns_correct_type", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0012520950003818143, "outcome": "passed"}, "call": {"duration": 0.01083490300061385, "outcome": "passed"}, "teardown": {"duration": 0.0005450150001706788, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_identity_fields", "lineno": 21, "outcome": "passed", "keywords": ["test_capabilities_identity_fields", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0016235510001934017, "outcome": "passed"}, "call": {"duration": 0.010826937000274484, "outcome": "passed"}, "teardown": {"duration": 0.0006705460000375751, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_supported_metrics", "lineno": 29, "outcome": "passed", "keywords": ["test_capabilities_supported_metrics", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0014765519999855314, "outcome": "passed"}, "call": {"duration": 0.010865726000702125, "outcome": "passed"}, "teardown": {"duration": 0.0005958149995421991, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_resource_limits_positive", "lineno": 39, "outcome": "passed", "keywords": ["test_capabilities_resource_limits_positive", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0012827589998778421, "outcome": "passed"}, "call": {"duration": 0.01091566199920635, "outcome": "passed"}, "teardown": {"duration": 0.0007879169997977442, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_feature_flags_boolean", "lineno": 50, "outcome": "passed", "keywords": ["test_capabilities_feature_flags_boolean", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001446044999283913, "outcome": "passed"}, "call": {"duration": 0.010805797000102757, "outcome": "passed"}, "teardown": {"duration": 0.0005199280003580498, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_idempotent_calls", "lineno": 68, "outcome": "passed", "keywords": ["test_capabilities_idempotent_calls", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001226158999998006, "outcome": "passed"}, "call": {"duration": 0.02103433699994639, "outcome": "passed"}, "teardown": {"duration": 0.000565512999855855, "outcome": "passed"}}, {"nodeid": "tests/vector/test_capabilities_shape.py::test_capabilities_all_required_fields_present", "lineno": 75, "outcome": "passed", "keywords": ["test_capabilities_all_required_fields_present", "test_capabilities_shape.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.0015198260007309727, "outcome": "passed"}, "call": {"duration": 0.010866116000215698, "outcome": "passed"}, "teardown": {"duration": 0.0006907650003995514, "outcome": "passed"}}, {"nodeid": "tests/vector/test_context_siem.py::test_observability_context_propagates_to_metrics_siem_safe", "lineno": 70, "outcome": "failed", "keywords": ["test_observability_context_propagates_to_metrics_siem_safe", "test_context_siem.py", "asyncio", "vector", "tests", "corpus-protocol-suite", ""], "setup": {"duration": 0.001345603999652667, "outcome": "passed"}, "call": {"duration": 0.021443337999698997, "outcome": "failed", "crash": {"path": "/media/rahul/514150442B0A5F0612/ahrvo/corpus-protocol-suite/tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "traceback": [{"path": "tests/vector/test_context_siem.py", "lineno": 78, "message": "in test_observability_context_propagates_to_metrics_siem_safe"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1761, "message": "in query"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1532, "message": "in _with_gates_unary"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1356, "message": "in _apply_deadline"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 612, "message": "in wrap"}, {"path": "corpus_sdk/vector/vector_base.py", "lineno": 1688, "message": "in _call"}, {"path": "tests/mock/mock_vector_adapter.py", "lineno": 261, "message": "in _do_query"}], "longrepr": "tests/vector/test_context_siem.py:78: in test_observability_context_propagates_to_metrics_siem_safe\n    await adapter.query(QuerySpec(vector=[0.1], top_k=1, namespace=\"default\"), ctx=ctx)\ncorpus_sdk/vector/vector_base.py:1761: in query\n    result = await self._with_gates_unary(\ncorpus_sdk/vector/vector_base.py:1532: in _with_gates_unary\n    result = await self._apply_deadline(call(), ctx)\ncorpus_sdk/vector/vector_base.py:1356: in _apply_deadline\n    return await self._deadline.wrap(awaitable, ctx)\ncorpus_sdk/vector/vector_base.py:612: in wrap\n    return await awaitable\ncorpus_sdk/vector/vector_base.py:1688: in _call\n    result = await self._do_query(spec, ctx=ctx)\ntests/mock/mock_vector_adapter.py:261: in _do_query\n    raise DimensionMismatch(\nE   corpus_sdk.vector.vector_base.DimensionMismatch: query vector dimension 1 does not match namespace 2"}, "teardown": {"duration": 0.0004106920005142456, "outcome": "passed"}}]}